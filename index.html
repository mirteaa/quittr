<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinite Colored Boxes</title>
    <style>
        /* Base page styling */
        body {
            margin: 0;
            padding: 0;
            background-color: #121212; /* Dark mode background */
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        /* light mode modifications */
        body.light {
            background-color: #f5f5f5;
            color: #111;
        }

        /* The main feed container */
        #feed {
            display: flex;
            flex-direction: column;
            gap: 20px;
            padding: 20px;
            width: 100%;
            max-width: 600px; /* Keeps it looking like a social media feed */
        }

        /* top menu bar */
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 50px;
            background: rgba(0,0,0,0.85);
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .top-bar.light {
            background: rgba(255,255,255,0.85);
            color: #000;
        }

        .top-bar .toggle-container {
            position: absolute;
            left: 20px;
        }

        .top-bar .icon {
            font-size: 2rem;
        }

        /* The colored boxes */
        .box {
            width: 100%;
            height: 250px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
            /* A subtle pop-in animation when they load */
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.4s ease-out forwards;
            position: relative; /* for placing like button */
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* The invisible trigger element at the bottom */
        #sentinel {
            height: 20px;
            width: 100%;
        }
    </style>
</head>
<body>

    <!-- top navigation bar -->
    <div class="top-bar" id="topBar">
        <div class="toggle-container">
            <button id="modeToggle">üåô</button>
        </div>
        <div class="icon">

<?xml version="1.0" encoding="UTF-8"?>
<svg width="98px" height="33px" viewBox="0 0 36 11" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>quittr logo</title>
    <defs>
        <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="linearGradient-1">
            <stop stop-color="#FF00D1" offset="0%"></stop>
            <stop stop-color="#00D0FF" offset="33.2932692%"></stop>
            <stop stop-color="#15FF00" offset="51.3303103%"></stop>
            <stop stop-color="#FFEE00" offset="68.9220935%"></stop>
            <stop stop-color="#FF6400" offset="83.4680944%"></stop>
            <stop stop-color="#FF0000" offset="100%"></stop>
        </linearGradient>
        <linearGradient x1="50%" y1="-93.8248851%" x2="50%" y2="232.201608%" id="linearGradient-2">
            <stop stop-color="#FF00D1" offset="0%"></stop>
            <stop stop-color="#00D0FF" offset="33.2932692%"></stop>
            <stop stop-color="#15FF00" offset="51.3303103%"></stop>
            <stop stop-color="#FFEE00" offset="68.9220935%"></stop>
            <stop stop-color="#FF6400" offset="83.4680944%"></stop>
            <stop stop-color="#FF0000" offset="100%"></stop>
        </linearGradient>
        <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="linearGradient-3">
            <stop stop-color="#FF00D1" offset="0%"></stop>
            <stop stop-color="#00D0FF" offset="33.2932692%"></stop>
            <stop stop-color="#15FF00" offset="51.3303103%"></stop>
            <stop stop-color="#FFEE00" offset="68.9220935%"></stop>
            <stop stop-color="#FF6400" offset="83.4680944%"></stop>
            <stop stop-color="#FF0000" offset="100%"></stop>
        </linearGradient>
        <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="linearGradient-4">
            <stop stop-color="#FF00D1" offset="0%"></stop>
            <stop stop-color="#00D0FF" offset="33.2932692%"></stop>
            <stop stop-color="#15FF00" offset="51.3303103%"></stop>
            <stop stop-color="#FFEE00" offset="68.9220935%"></stop>
            <stop stop-color="#FF6400" offset="83.4680944%"></stop>
            <stop stop-color="#FF0000" offset="100%"></stop>
        </linearGradient>
        <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="linearGradient-5">
            <stop stop-color="#FF00D1" offset="0%"></stop>
            <stop stop-color="#00D0FF" offset="33.2932692%"></stop>
            <stop stop-color="#15FF00" offset="51.3303103%"></stop>
            <stop stop-color="#FFEE00" offset="68.9220935%"></stop>
            <stop stop-color="#FF6400" offset="83.4680944%"></stop>
            <stop stop-color="#FF0000" offset="100%"></stop>
        </linearGradient>
        <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="linearGradient-6">
            <stop stop-color="#FF00D1" offset="0%"></stop>
            <stop stop-color="#00D0FF" offset="33.2932692%"></stop>
            <stop stop-color="#15FF00" offset="51.3303103%"></stop>
            <stop stop-color="#FFEE00" offset="68.9220935%"></stop>
            <stop stop-color="#FF6400" offset="83.4680944%"></stop>
            <stop stop-color="#FF0000" offset="100%"></stop>
        </linearGradient>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Group" transform="translate(0.288, 0.344)">
            <path d="M7.44,8.448 C7.44,9.04 7.228,9.548 6.804,9.972 C6.38,10.396 5.872,10.608 5.28,10.608 C4.792,10.608 4.358,10.456 3.978,10.152 C3.598,9.848 3.348,9.456 3.228,8.976 C2.308,8.856 1.54,8.446 0.924,7.746 C0.308,7.046 0,6.236 0,5.316 C0,4.292 0.364,3.416 1.092,2.688 C1.82,1.96 2.696,1.596 3.72,1.596 C4.744,1.596 5.62,1.96 6.348,2.688 C7.076,3.416 7.44,4.292 7.44,5.316 L7.44,8.448 Z" id="Path" fill="url(#linearGradient-1)"></path>
            <path d="M6.06,8.448 L6.06,5.316 C6.06,4.668 5.832,4.114 5.376,3.654 C4.92,3.194 4.368,2.964 3.72,2.964 C3.072,2.964 2.52,3.194 2.064,3.654 C1.608,4.114 1.38,4.668 1.38,5.316 C1.38,5.956 1.608,6.506 2.064,6.966 C2.52,7.426 3.072,7.656 3.72,7.656 L4.488,7.656 L4.488,8.448 C4.488,8.664 4.566,8.848 4.722,9 C4.878,9.152 5.064,9.228 5.28,9.228 C5.496,9.228 5.68,9.152 5.832,9 C5.984,8.848 6.06,8.664 6.06,8.448 Z" id="Path" fill="#FFFFFF"></path>
            <path d="M4.488,6.084 L3.72,6.084 C3.512,6.084 3.332,6.008 3.18,5.856 C3.028,5.704 2.952,5.524 2.952,5.316 C2.952,5.1 3.028,4.916 3.18,4.764 C3.332,4.612 3.512,4.536 3.72,4.536 C3.928,4.536 4.108,4.612 4.26,4.764 C4.412,4.916 4.488,5.1 4.488,5.316 L4.488,6.084 Z" id="Path" fill="url(#linearGradient-2)"></path>
            <path d="M14.144,5.316 C14.144,6.34 13.78,7.216 13.052,7.944 C12.324,8.672 11.448,9.036 10.424,9.036 C9.4,9.036 8.522,8.672 7.79,7.944 C7.058,7.216 6.692,6.34 6.692,5.316 L6.692,3.744 C6.692,3.152 6.904,2.644 7.328,2.22 C7.752,1.796 8.26,1.584 8.852,1.584 C9.46,1.584 9.98,1.812 10.412,2.268 C10.844,1.82 11.364,1.596 11.972,1.596 C12.572,1.596 13.084,1.806 13.508,2.226 C13.932,2.646 14.144,3.156 14.144,3.756 L14.144,5.316 Z" id="Path" fill="url(#linearGradient-3)"></path>
            <path d="M12.752,5.316 L12.764,3.756 C12.764,3.54 12.688,3.354 12.536,3.198 C12.384,3.042 12.2,2.964 11.984,2.964 C11.768,2.964 11.582,3.042 11.426,3.198 C11.27,3.354 11.192,3.54 11.192,3.756 L11.192,5.316 C11.192,5.524 11.116,5.704 10.964,5.856 C10.812,6.008 10.632,6.084 10.424,6.084 C10.216,6.084 10.036,6.008 9.884,5.856 C9.732,5.704 9.656,5.524 9.656,5.316 L9.656,3.744 C9.656,3.528 9.578,3.344 9.422,3.192 C9.266,3.04 9.08,2.964 8.864,2.964 C8.648,2.964 8.462,3.04 8.306,3.192 C8.15,3.344 8.072,3.528 8.072,3.744 L8.072,5.316 C8.072,5.956 8.3,6.506 8.756,6.966 C9.212,7.426 9.764,7.656 10.412,7.656 C11.06,7.656 11.61,7.428 12.062,6.972 C12.514,6.516 12.744,5.964 12.752,5.316 Z" id="Path" fill="#FFFFFF"></path>
            <path d="M17.728,6.876 C17.728,7.468 17.514,7.976 17.086,8.4 C16.658,8.824 16.148,9.036 15.556,9.036 C14.964,9.036 14.456,8.824 14.032,8.4 C13.608,7.976 13.396,7.468 13.396,6.876 L13.396,4.32 C13.396,3.96 13.492,3.6 13.684,3.24 C13.492,2.912 13.396,2.556 13.396,2.172 C13.396,1.572 13.608,1.06 14.032,0.636 C14.456,0.212 14.964,0 15.556,0 C16.148,0 16.656,0.212 17.08,0.636 C17.504,1.06 17.716,1.572 17.716,2.172 C17.716,2.556 17.62,2.912 17.428,3.24 C17.628,3.576 17.728,3.936 17.728,4.32 L17.728,6.876 Z" id="Path" fill="url(#linearGradient-4)"></path>
            <path d="M16.336,2.172 C16.336,1.956 16.26,1.77 16.108,1.614 C15.956,1.458 15.772,1.38 15.556,1.38 C15.34,1.38 15.156,1.458 15.004,1.614 C14.852,1.77 14.776,1.956 14.776,2.172 C14.776,2.388 14.852,2.572 15.004,2.724 C15.156,2.876 15.34,2.952 15.556,2.952 C15.772,2.952 15.956,2.876 16.108,2.724 C16.26,2.572 16.336,2.388 16.336,2.172 Z" id="Path" fill="#FFFFFF"></path>
            <path d="M16.348,6.876 L16.348,4.32 C16.348,4.104 16.27,3.92 16.114,3.768 C15.958,3.616 15.772,3.54 15.556,3.54 C15.34,3.54 15.156,3.616 15.004,3.768 C14.852,3.92 14.776,4.104 14.776,4.32 L14.776,6.876 C14.776,7.092 14.852,7.276 15.004,7.428 C15.156,7.58 15.34,7.656 15.556,7.656 C15.772,7.656 15.958,7.58 16.114,7.428 C16.27,7.276 16.348,7.092 16.348,6.876 Z" id="Path" fill="#FFFFFF"></path>
            <path d="M23.412,6.864 C23.412,7.464 23.2,7.976 22.776,8.4 C22.352,8.824 21.844,9.036 21.252,9.036 L20.676,9.036 C19.652,9.036 18.776,8.672 18.048,7.944 C17.32,7.216 16.956,6.34 16.956,5.316 L16.956,2.172 C16.956,1.58 17.168,1.072 17.592,0.648 C18.016,0.224 18.528,0.012 19.128,0.012 C19.616,0.012 20.044,0.154 20.412,0.438 C20.78,0.722 21.032,1.1 21.168,1.572 L21.252,1.572 C21.844,1.572 22.352,1.784 22.776,2.208 C23.2,2.632 23.412,3.14 23.412,3.732 C23.412,4.356 23.18,4.88 22.716,5.304 C23.18,5.744 23.412,6.264 23.412,6.864 Z" id="Path" fill="url(#linearGradient-5)"></path>
            <path d="M22.032,6.864 C22.032,6.648 21.956,6.464 21.804,6.312 C21.652,6.16 21.468,6.084 21.252,6.084 L20.676,6.084 C20.468,6.084 20.288,6.008 20.136,5.856 C19.984,5.704 19.908,5.524 19.908,5.316 L19.908,4.524 L21.252,4.524 C21.468,4.524 21.652,4.448 21.804,4.296 C21.956,4.144 22.032,3.956 22.032,3.732 C22.032,3.516 21.956,3.332 21.804,3.18 C21.652,3.028 21.468,2.952 21.252,2.952 L19.908,2.952 L19.908,2.172 C19.908,1.956 19.832,1.772 19.68,1.62 C19.528,1.468 19.344,1.392 19.128,1.392 C18.904,1.392 18.716,1.468 18.564,1.62 C18.412,1.772 18.336,1.956 18.336,2.172 L18.336,5.316 C18.336,5.956 18.564,6.506 19.02,6.966 C19.476,7.426 20.028,7.656 20.676,7.656 L21.252,7.656 C21.468,7.656 21.652,7.58 21.804,7.428 C21.956,7.276 22.032,7.088 22.032,6.864 Z" id="Path" fill="#FFFFFF"></path>
            <path d="M29.06,6.864 C29.06,7.464 28.848,7.976 28.424,8.4 C28,8.824 27.492,9.036 26.9,9.036 L26.324,9.036 C25.3,9.036 24.424,8.672 23.696,7.944 C22.968,7.216 22.604,6.34 22.604,5.316 L22.604,2.172 C22.604,1.58 22.816,1.072 23.24,0.648 C23.664,0.224 24.176,0.012 24.776,0.012 C25.264,0.012 25.692,0.154 26.06,0.438 C26.428,0.722 26.68,1.1 26.816,1.572 L26.9,1.572 C27.492,1.572 28,1.784 28.424,2.208 C28.848,2.632 29.06,3.14 29.06,3.732 C29.06,4.356 28.828,4.88 28.364,5.304 C28.828,5.744 29.06,6.264 29.06,6.864 Z" id="Path" fill="url(#linearGradient-5)"></path>
            <path d="M27.68,6.864 C27.68,6.648 27.604,6.464 27.452,6.312 C27.3,6.16 27.116,6.084 26.9,6.084 L26.324,6.084 C26.116,6.084 25.936,6.008 25.784,5.856 C25.632,5.704 25.556,5.524 25.556,5.316 L25.556,4.524 L26.9,4.524 C27.116,4.524 27.3,4.448 27.452,4.296 C27.604,4.144 27.68,3.956 27.68,3.732 C27.68,3.516 27.604,3.332 27.452,3.18 C27.3,3.028 27.116,2.952 26.9,2.952 L25.556,2.952 L25.556,2.172 C25.556,1.956 25.48,1.772 25.328,1.62 C25.176,1.468 24.992,1.392 24.776,1.392 C24.552,1.392 24.364,1.468 24.212,1.62 C24.06,1.772 23.984,1.956 23.984,2.172 L23.984,5.316 C23.984,5.956 24.212,6.506 24.668,6.966 C25.124,7.426 25.676,7.656 26.324,7.656 L26.9,7.656 C27.116,7.656 27.3,7.58 27.452,7.428 C27.604,7.276 27.68,7.088 27.68,6.864 Z" id="Path" fill="#FFFFFF"></path>
            <path d="M35.236,3.744 C35.236,4.344 35.024,4.854 34.6,5.274 C34.176,5.694 33.664,5.904 33.064,5.904 L32.512,5.904 L32.512,6.864 C32.512,7.464 32.302,7.976 31.882,8.4 C31.462,8.824 30.952,9.036 30.352,9.036 C29.76,9.036 29.252,8.824 28.828,8.4 C28.404,7.976 28.192,7.464 28.192,6.864 L28.192,5.304 C28.192,4.28 28.556,3.404 29.284,2.676 C30.012,1.948 30.888,1.584 31.912,1.584 L33.064,1.584 C33.664,1.584 34.176,1.796 34.6,2.22 C35.024,2.644 35.236,3.152 35.236,3.744 Z" id="Path" fill="url(#linearGradient-6)"></path>
            <path d="M33.856,3.744 C33.856,3.528 33.778,3.344 33.622,3.192 C33.466,3.04 33.28,2.964 33.064,2.964 L31.912,2.964 C31.264,2.964 30.712,3.192 30.256,3.648 C29.8,4.104 29.572,4.656 29.572,5.304 L29.572,6.864 C29.572,7.088 29.648,7.276 29.8,7.428 C29.952,7.58 30.136,7.656 30.352,7.656 C30.568,7.656 30.754,7.58 30.91,7.428 C31.066,7.276 31.144,7.088 31.144,6.864 L31.144,5.304 C31.144,5.096 31.22,4.916 31.372,4.764 C31.524,4.612 31.704,4.536 31.912,4.536 L33.064,4.536 C33.288,4.536 33.476,4.458 33.628,4.302 C33.78,4.146 33.856,3.96 33.856,3.744 Z" id="Path" fill="#FFFFFF"></path>
        </g>
    </g>
</svg>

        </div>
    </div>

    <div id="feed"></div>
    
    <div id="sentinel"></div>

    <script>
        const feedContainer = document.getElementById('feed');
        const sentinel = document.getElementById('sentinel');

        // dark/light mode toggle
        const modeToggle = document.getElementById('modeToggle');
        const topBar = document.getElementById('topBar');
        modeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light');
            topBar.classList.toggle('light');
            if (document.body.classList.contains('light')) {
                modeToggle.textContent = '‚òÄÔ∏è';
            } else {
                modeToggle.textContent = 'üåô';
            }
        });

        // 1. Generate a random hex color
        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        // 2. Create a single box element
        function createBox() {
            const box = document.createElement('div');
            box.className = 'box';
            box.style.backgroundColor = getRandomColor();

            // add like button inside each box
            const likeBtn = document.createElement('button');
            likeBtn.className = 'like-btn';
            likeBtn.textContent = '‚ô• 0';
            likeBtn.style.position = 'absolute';
            likeBtn.style.bottom = '10px';
            likeBtn.style.right = '10px';
            likeBtn.style.background = 'rgba(255,255,255,0.8)';
            likeBtn.style.border = 'none';
            likeBtn.style.borderRadius = '12px';
            likeBtn.style.padding = '5px 10px';
            likeBtn.style.cursor = 'pointer';
            likeBtn.dataset.likes = 0;

            likeBtn.addEventListener('click', () => {
                let count = parseInt(likeBtn.dataset.likes, 10);
                count += 1;
                likeBtn.dataset.likes = count;
                likeBtn.textContent = `‚ô• ${count}`;
            });

            // retweet button to the right
            const retweetBtn = document.createElement('button');
            retweetBtn.className = 'retweet-btn';
            retweetBtn.textContent = 'üîÅ 0';
            retweetBtn.style.position = 'absolute';
            retweetBtn.style.bottom = '10px';
            retweetBtn.style.right = '70px';
            retweetBtn.style.background = 'rgba(255,255,255,0.8)';
            retweetBtn.style.border = 'none';
            retweetBtn.style.borderRadius = '12px';
            retweetBtn.style.padding = '5px 10px';
            retweetBtn.style.cursor = 'pointer';
            retweetBtn.dataset.count = 0;

            retweetBtn.addEventListener('click', () => {
                let cnt = parseInt(retweetBtn.dataset.count, 10);
                cnt += 1;
                retweetBtn.dataset.count = cnt;
                retweetBtn.textContent = `üîÅ ${cnt}`;
            });

            box.appendChild(retweetBtn);
            box.appendChild(likeBtn);
            return box;
        }

        // 3. Load a specific number of boxes into the feed
        function loadBoxes(batchSize = 5) {
            // Using a DocumentFragment improves performance by limiting DOM repaints
            const fragment = document.createDocumentFragment();
            for (let i = 0; i < batchSize; i++) {
                fragment.appendChild(createBox());
            }
            feedContainer.appendChild(fragment);
        }

        // 4. Initial load so the screen isn't empty
        loadBoxes(10);

        // 5. Set up the Intersection Observer
        const observer = new IntersectionObserver((entries) => {
            // If the sentinel is intersecting (visible on screen), load more!
            if (entries[0].isIntersecting) {
                // Adding a tiny delay mimics network loading and feels more natural
                setTimeout(() => {
                    loadBoxes(10);
                }, 150);
            }
        }, {
            // Start loading 200px BEFORE the user actually hits the bottom
            rootMargin: '200px' 
        });

        // Tell the observer to watch the sentinel
        observer.observe(sentinel);
    </script>
</body>
</html>
